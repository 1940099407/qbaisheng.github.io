import{_ as N,r as c,o as S,l as j,a as v,c as L,b as Z,e as a,d as e,w as s,f as E,u as R,m as q,n as z,p as x,t as i,C as k,E as U,q as F}from"./index-Bua01rXW.js";const H={class:"statistics-page"},J={class:"page-header"},K={class:"header-controls"},O={class:"stats-cards"},P={class:"stat-content"},Q={class:"stat-meta"},W={class:"stat-value"},X={class:"stat-content"},Y={class:"stat-meta"},tt={class:"stat-value"},at={class:"stat-content"},et={class:"stat-meta"},st={class:"stat-value"},lt={class:"stat-content"},ot={class:"stat-meta"},nt={class:"stat-value"},dt={class:"charts-grid"},it={__name:"data-statistics",setup(rt){const f=c("30d"),w=c(128),A=c(3562),m=c(89),h=c(68.7),g=c(5.2),_=c(12.8),y=c(-2.1),C=c(3.5);let l=null,u=null,o=null;const T=()=>{l&&l.destroy();const r=document.getElementById("userGrowthChart").getContext("2d");l=new k(r,{type:"line",data:{labels:M(),datasets:[{label:"æ–°å¢žç”¨æˆ·",data:[8,12,9,15,11,14,18,22,19,25],borderColor:"#409eff",backgroundColor:"rgba(64, 158, 255, 0.1)",fill:!0,tension:.3}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"ç”¨æˆ·æ•°"}}}}}),u&&u.destroy();const t=document.getElementById("checkinTypeChart").getContext("2d");u=new k(t,{type:"doughnut",data:{labels:["å­¦ä¹ ","è¿åŠ¨","é˜…è¯»","å†¥æƒ³","å…¶ä»–"],datasets:[{data:[35,25,20,15,5],backgroundColor:["#409eff","#67c23a","#e6a23c","#f56c6c","#909399"]}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right"}}}}),o&&o.destroy();const n=document.getElementById("dailyActiveChart").getContext("2d");o=new k(n,{type:"bar",data:{labels:M(),datasets:[{label:"æ´»è·ƒç”¨æˆ·æ•°",data:[45,52,49,63,58,72,65,78,69,82],backgroundColor:"#67c23a"}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,title:{display:!0,text:"æ´»è·ƒç”¨æˆ·æ•°"}}}}})},M=()=>{const r=[],t=f.value==="7d"?7:f.value==="30d"?10:12;for(let n=t-1;n>=0;n--){const d=new Date;d.setDate(d.getDate()-n),r.push(`${d.getMonth()+1}/${d.getDate()}`)}return r},$=()=>{U({message:"æ•°æ®åˆ·æ–°ä¸­...",type:"info"}),setTimeout(()=>{m.value=Math.floor(m.value*(.95+Math.random()*.1)),h.value=(h.value*(.98+Math.random()*.04)).toFixed(1),B(),F({title:"æˆåŠŸ",message:"æ•°æ®å·²æ›´æ–°",type:"success"})},800)},B=()=>{l&&l.data?.datasets&&(l.data.datasets[0].data=l.data.datasets[0].data.map(r=>Math.floor(r*(.9+Math.random()*.2))),l.update()),o&&o.data?.datasets&&(o.data.datasets[0].data=o.data.datasets[0].data.map(r=>Math.floor(r*(.9+Math.random()*.2))),o.update())},V=()=>{l&&(l.destroy(),l=null),u&&(u.destroy(),u=null),o&&(o.destroy(),o=null),T()},I=()=>{const t="data:text/csv;charset=utf-8,"+[["æŒ‡æ ‡","å½“å‰å€¼","è¾ƒä¸ŠæœŸå˜åŒ–"],["æ€»ç”¨æˆ·æ•°",w.value,`${g.value}%`],["æ€»æ‰“å¡æ¬¡æ•°",A.value,`${_.value}%`],["æ´»è·ƒç”¨æˆ·æ•°",m.value,`${y.value}%`],["æ´»åŠ¨å‚ä¸ŽçŽ‡",`${h.value}%`,`${C.value}%`]].map(b=>b.join(",")).join(`
`),n=encodeURI(t),d=document.createElement("a");d.setAttribute("href",n),d.setAttribute("download",`æ•°æ®ç»Ÿè®¡æŠ¥è¡¨_${new Date().toLocaleDateString()}.csv`),document.body.appendChild(d),d.click(),document.body.removeChild(d),U.success("æŠ¥è¡¨å¯¼å‡ºæˆåŠŸ")};return S(()=>{T()}),j(()=>{l&&l.destroy(),u&&u.destroy(),o&&o.destroy()}),(r,t)=>{const n=v("el-option"),d=v("el-select"),b=v("el-icon"),D=v("el-button"),p=v("el-card");return Z(),L("div",H,[a("div",J,[t[3]||(t[3]=a("h2",null,"æ•°æ®ç»Ÿè®¡ä¸Žå¯è§†åŒ–",-1)),a("div",K,[e(d,{modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=G=>f.value=G),onChange:V,style:{width:"180px","margin-right":"10px"}},{default:s(()=>[e(n,{label:"è¿‘7å¤©",value:"7d"}),e(n,{label:"è¿‘30å¤©",value:"30d"}),e(n,{label:"è¿‘90å¤©",value:"90d"}),e(n,{label:"å…¨å¹´",value:"year"})]),_:1},8,["modelValue"]),e(D,{type:"primary",onClick:$},{default:s(()=>[e(b,null,{default:s(()=>[e(R(q))]),_:1}),t[1]||(t[1]=E(" åˆ·æ–°æ•°æ® ",-1))]),_:1}),e(D,{onClick:I,style:{"margin-left":"10px"}},{default:s(()=>[e(b,null,{default:s(()=>[e(R(z))]),_:1}),t[2]||(t[2]=E(" å¯¼å‡ºæŠ¥è¡¨ ",-1))]),_:1})])]),a("div",O,[e(p,{class:"stat-card"},{default:s(()=>[a("div",P,[a("div",Q,[t[4]||(t[4]=a("p",{class:"stat-label"},"æ€»ç”¨æˆ·æ•°",-1)),a("p",{class:x(["stat-change",g.value>0?"increase":"decrease"])},i(g.value>0?"+":"")+i(g.value)+"% è¾ƒä¸ŠæœŸ ",3)]),a("p",W,i(w.value),1)]),t[5]||(t[5]=a("div",{class:"stat-icon"},"ðŸ‘¥",-1))]),_:1}),e(p,{class:"stat-card"},{default:s(()=>[a("div",X,[a("div",Y,[t[6]||(t[6]=a("p",{class:"stat-label"},"æ€»æ‰“å¡æ¬¡æ•°",-1)),a("p",{class:x(["stat-change",_.value>0?"increase":"decrease"])},i(_.value>0?"+":"")+i(_.value)+"% è¾ƒä¸ŠæœŸ ",3)]),a("p",tt,i(A.value),1)]),t[7]||(t[7]=a("div",{class:"stat-icon"},"âœ…",-1))]),_:1}),e(p,{class:"stat-card"},{default:s(()=>[a("div",at,[a("div",et,[t[8]||(t[8]=a("p",{class:"stat-label"},"æ´»è·ƒç”¨æˆ·æ•°",-1)),a("p",{class:x(["stat-change",y.value>0?"increase":"decrease"])},i(y.value>0?"+":"")+i(y.value)+"% è¾ƒä¸ŠæœŸ ",3)]),a("p",st,i(m.value),1)]),t[9]||(t[9]=a("div",{class:"stat-icon"},"ðŸ”¥",-1))]),_:1}),e(p,{class:"stat-card"},{default:s(()=>[a("div",lt,[a("div",ot,[t[10]||(t[10]=a("p",{class:"stat-label"},"æ´»åŠ¨å‚ä¸ŽçŽ‡",-1)),a("p",{class:x(["stat-change",C.value>0?"increase":"decrease"])},i(C.value>0?"+":"")+i(C.value)+"% è¾ƒä¸ŠæœŸ ",3)]),a("p",nt,i(h.value)+"%",1)]),t[11]||(t[11]=a("div",{class:"stat-icon"},"ðŸ“ˆ",-1))]),_:1})]),a("div",dt,[e(p,{class:"chart-card"},{header:s(()=>[...t[12]||(t[12]=[a("h3",null,"ç”¨æˆ·å¢žé•¿è¶‹åŠ¿",-1)])]),default:s(()=>[t[13]||(t[13]=a("div",{class:"chart-container"},[a("canvas",{id:"userGrowthChart"})],-1))]),_:1}),e(p,{class:"chart-card"},{header:s(()=>[...t[14]||(t[14]=[a("h3",null,"æ‰“å¡ç±»åž‹åˆ†å¸ƒ",-1)])]),default:s(()=>[t[15]||(t[15]=a("div",{class:"chart-container"},[a("canvas",{id:"checkinTypeChart"})],-1))]),_:1}),e(p,{class:"chart-card"},{header:s(()=>[...t[16]||(t[16]=[a("h3",null,"æ¯æ—¥æ´»è·ƒç”¨æˆ·",-1)])]),default:s(()=>[t[17]||(t[17]=a("div",{class:"chart-container"},[a("canvas",{id:"dailyActiveChart"})],-1))]),_:1})])])}}},ut=N(it,[["__scopeId","data-v-d174ca44"]]);export{ut as default};
