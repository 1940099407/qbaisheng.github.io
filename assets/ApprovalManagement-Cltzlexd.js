import{_ as y,r as S,o as h,a as p,c,b as i,e as w,d as l,w as r,g as A,f as d,t as N,u as I,h as k,E as u}from"./index-DZvBIL67.js";const C={class:"approval-management"},J={key:0,class:"empty-state"},O={__name:"ApprovalManagement",setup(x){const a=S([]),v={leave:"请假",reimbursement:"报销",other:"其他"};h(()=>{const s=localStorage.getItem("pendingApprovals");a.value=s?JSON.parse(s):[]});const m=s=>{const e=a.value.find(o=>o.id===s);if(!e)return;a.value=a.value.filter(o=>o.id!==s),e.status="approved";const t=JSON.parse(localStorage.getItem("approvedApprovals")||"[]");t.push(e),localStorage.setItem("approvedApprovals",JSON.stringify(t)),localStorage.setItem("pendingApprovals",JSON.stringify(a.value)),u.success("审批已通过")},_=s=>{const e=a.value.find(o=>o.id===s);if(!e)return;a.value=a.value.filter(o=>o.id!==s),e.status="rejected";const t=JSON.parse(localStorage.getItem("rejectedApprovals")||"[]");t.push(e),localStorage.setItem("rejectedApprovals",JSON.stringify(t)),localStorage.setItem("pendingApprovals",JSON.stringify(a.value)),u.success("已驳回申请")};return(s,e)=>{const t=p("el-table-column"),o=p("el-button"),g=p("el-table"),f=p("el-card");return i(),c("div",C,[e[2]||(e[2]=w("h2",null,"审批管理",-1)),l(f,null,{default:r(()=>[l(g,{data:a.value,border:"",style:{width:"100%"}},{default:r(()=>[l(t,{prop:"username",label:"申请人",width:"120"}),l(t,{prop:"type",label:"申请类型",width:"120"},{default:r(n=>[d(N(v[n.row.type]||n.row.type),1)]),_:1}),l(t,{prop:"reason",label:"申请理由"}),l(t,{prop:"date",label:"申请时间",width:"150"}),l(t,{prop:"submitTime",label:"提交时间",width:"180"}),l(t,{label:"操作",width:"200"},{default:r(n=>[l(o,{size:"small",type:"success",onClick:b=>m(n.row.id)},{default:r(()=>[...e[0]||(e[0]=[d(" 通过 ",-1)])]),_:1},8,["onClick"]),l(o,{size:"small",type:"danger",onClick:b=>_(n.row.id)},{default:r(()=>[...e[1]||(e[1]=[d(" 驳回 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),a.value.length===0?(i(),c("div",J,[l(I(k),{description:"暂无待审批的申请"})])):A("",!0)]),_:1})])}}},E=y(O,[["__scopeId","data-v-a09de6bd"]]);export{E as default};
