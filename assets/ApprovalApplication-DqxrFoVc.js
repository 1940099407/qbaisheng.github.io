import{_ as N,r as v,o as Y,a as l,c as D,b as k,d as e,w as a,e as g,f as m,t as J,E as f}from"./index-DZvBIL67.js";const O={class:"approval-application"},C={__name:"ApprovalApplication",setup(T){const o=v({type:"",reason:"",date:""}),b={pending:"待审批",approved:"已通过",rejected:"已驳回"},y={pending:"warning",approved:"success",rejected:"danger"},d=v([]);Y(()=>{const r=localStorage.getItem("username"),t=JSON.parse(localStorage.getItem("pendingApprovals")||"[]").concat(JSON.parse(localStorage.getItem("approvedApprovals")||"[]")).concat(JSON.parse(localStorage.getItem("rejectedApprovals")||"[]"));d.value=t.filter(n=>n.username===r)});const S=()=>{const r=localStorage.getItem("username");if(!r){f.error("请先登录");return}const t={id:Date.now().toString(),username:r,...o.value,status:"pending",submitTime:new Date().toLocaleString()},n=JSON.parse(localStorage.getItem("pendingApprovals")||"[]");n.push(t),localStorage.setItem("pendingApprovals",JSON.stringify(n)),d.value.push(t),f.success("申请提交成功"),c()},c=()=>{o.value={type:"",reason:"",date:""}};return(r,t)=>{const n=l("el-option"),w=l("el-select"),s=l("el-form-item"),A=l("el-input"),V=l("el-date-picker"),i=l("el-button"),x=l("el-form"),_=l("el-card"),u=l("el-table-column"),I=l("el-tag"),M=l("el-table");return k(),D("div",O,[e(_,null,{default:a(()=>[t[5]||(t[5]=g("h2",null,"申请发起",-1)),e(x,{ref:"approvalForm",model:o.value,"label-width":"120px",class:"approval-form"},{default:a(()=>[e(s,{label:"申请类型",prop:"type",rules:[{required:!0,message:"请选择申请类型"}]},{default:a(()=>[e(w,{modelValue:o.value.type,"onUpdate:modelValue":t[0]||(t[0]=p=>o.value.type=p),placeholder:"请选择"},{default:a(()=>[e(n,{label:"请假",value:"leave"}),e(n,{label:"报销",value:"reimbursement"}),e(n,{label:"其他",value:"other"})]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"申请理由",prop:"reason",rules:[{required:!0,message:"请输入申请理由"}]},{default:a(()=>[e(A,{type:"textarea",modelValue:o.value.reason,"onUpdate:modelValue":t[1]||(t[1]=p=>o.value.reason=p),rows:"4",placeholder:"请详细描述申请理由"},null,8,["modelValue"])]),_:1}),e(s,{label:"申请时间",prop:"date",rules:[{required:!0,message:"请选择申请时间"}]},{default:a(()=>[e(V,{modelValue:o.value.date,"onUpdate:modelValue":t[2]||(t[2]=p=>o.value.date=p),type:"date",placeholder:"选择日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),e(s,null,{default:a(()=>[e(i,{type:"primary",onClick:S},{default:a(()=>[...t[3]||(t[3]=[m("提交申请",-1)])]),_:1}),e(i,{onClick:c},{default:a(()=>[...t[4]||(t[4]=[m("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(_,{style:{"margin-top":"20px"}},{default:a(()=>[t[6]||(t[6]=g("h3",null,"我的申请记录",-1)),e(M,{data:d.value,style:{width:"100%"}},{default:a(()=>[e(u,{prop:"type",label:"申请类型",width:"120"}),e(u,{prop:"reason",label:"申请理由"}),e(u,{prop:"date",label:"申请时间",width:"150"}),e(u,{prop:"status",label:"状态",width:"120"},{default:a(p=>[e(I,{type:y[p.row.status]},{default:a(()=>[m(J(b[p.row.status]),1)]),_:2},1032,["type"])]),_:1})]),_:1},8,["data"])]),_:1})])}}},q=N(C,[["__scopeId","data-v-a3516d6a"]]);export{q as default};
